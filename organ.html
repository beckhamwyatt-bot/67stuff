<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Oregon Trail (1971) - JavaScript Version</title>
  <style>
    body { background: #111; color: #eee; font-family: monospace; padding: 2em; }
    #game { white-space: pre-line; }
    input { background: #222; color: #eee; border: 1px solid #444; }
  </style>
</head>
<body>
  <div id="game"></div>
  <input id="userinput" autofocus />
  <script>
    const game = document.getElementById("game");
    const input = document.getElementById("userinput");

    let step = 0;
    let cash = 900, oxen = 0, food = 0, ammo = 0, clothes = 0, misc = 0;

    function print(txt) { game.textContent += txt + "\n"; game.scrollTop = game.scrollHeight; }
    function prompt(txt) { print(txt); input.value = ""; input.focus(); }

    function mainLoop(val) {
      if (step === 0) {
        print("THE OREGON TRAIL (1971 JS VERSION)");
        prompt("DO YOU WANT INSTRUCTIONS (YES/NO)?");
        step = 1;
      } else if (step === 1) {
        if (val.toLowerCase().startsWith("y")) {
          print(
`THIS PROGRAM SIMULATES A TRIP OVER THE OREGON TRAIL FROM
INDEPENDENCE, MISSOURI TO OREGON CITY, OREGON IN 1847.
YOUR FAMILY OF FIVE WILL COVER THE 2040 MILE OREGON TRAIL
IN 5-6 MONTHSâ€”IF YOU MAKE IT ALIVE.
YOU HAVE $900 TO SPEND FOR THE TRIP AND A WAGON COSTS $200.
YOU WILL NEED TO SPEND THE REST OF YOUR MONEY ON THE FOLLOWING ITEMS:
  OXEN ($40 EACH)
  FOOD ($0.20 PER POUND)
  AMMUNITION ($1 PER BOX OF 50 BULLETS)
  CLOTHING ($10 PER SET)
  MISCELLANEOUS SUPPLIES ($2 EACH)
`
          );
        }
        prompt("HOW MUCH DO YOU WANT TO SPEND ON YOUR OXEN? ($200-$300)");
        step = 2;
      } else if (step === 2) {
        oxen = Number(val);
        if (oxen < 200 || oxen > 300 || oxen > cash) {
          prompt("ENTER A VALUE BETWEEN 200 AND 300:");
        } else {
          cash -= oxen;
          prompt("HOW MUCH DO YOU WANT TO SPEND ON FOOD?");
          step = 3;
        }
      } else if (step === 3) {
        food = Number(val);
        if (food < 0 || food > cash) {
          prompt("ENTER A VALUE UP TO $" + cash + ":");
        } else {
          cash -= food;
          prompt("HOW MUCH DO YOU WANT TO SPEND ON AMMUNITION?");
          step = 4;
        }
      } else if (step === 4) {
        ammo = Number(val);
        if (ammo < 0 || ammo > cash) {
          prompt("ENTER A VALUE UP TO $" + cash + ":");
        } else {
          cash -= ammo;
          prompt("HOW MUCH DO YOU WANT TO SPEND ON CLOTHING?");
          step = 5;
        }
      } else if (step === 5) {
        clothes = Number(val);
        if (clothes < 0 || clothes > cash) {
          prompt("ENTER A VALUE UP TO $" + cash + ":");
        } else {
          cash -= clothes;
          prompt("HOW MUCH DO YOU WANT TO SPEND ON MISCELLANEOUS SUPPLIES?");
          step = 6;
        }
      } else if (step === 6) {
        misc = Number(val);
        if (misc < 0 || misc > cash) {
          prompt("ENTER A VALUE UP TO $" + cash + ":");
        } else {
          cash -= misc;
          print("YOU ARE READY TO START YOUR JOURNEY!");
          print(
            `Supplies purchased:
  Oxen: $${oxen}
  Food: $${food}
  Ammo: $${ammo}
  Clothes: $${clothes}
  Misc: $${misc}
Cash left: $${cash}
Good luck on the trail! (Game logic continues...)`
          );
          input.style.display = "none";
        }
      }
    }

    input.addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        mainLoop(input.value);
      }
    });

    mainLoop("");
  </script>
</body>
</html>
